<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>MyCashFlow - Premium Finance</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="https://img.icons8.com/color/192/wallet--v1.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Fonts & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <div id="app">
    <!-- View: Home -->
    <div id="home-view" class="view-section active-view">
      <header class="main-header">
        <div class="user-profile">
          <div class="avatar">
            <img src="https://ui-avatars.com/api/?name=User&background=0D8ABC&color=fff" alt="User">
          </div>
          <div class="welcome">
            <p>Good Morning,</p>
            <h3>Ready for today?</h3>
          </div>
        </div>
        <button class="notif-btn"><i class="ri-notification-3-line"></i></button>
      </header>

      <section class="balance-card">
        <div class="card-content">
          <div class="dual-balance">
            <div class="balance-item">
              <p>Total IDR</p>
              <h1 id="balance-idr">Rp 0</h1>
            </div>
            <div class="balance-item text-right">
              <p>Total USD</p>
              <h1 id="balance-usd">$ 0</h1>
            </div>
          </div>
          <div class="stats-row">
            <div class="stat up">
              <div class="icon-circle"><i class="ri-arrow-up-line"></i></div>
              <div class="stat-info">
                <small>Income</small>
                <div id="inc-container">
                  <span id="total-income-idr">Rp 0</span>
                  <span id="total-income-usd" class="sub-stat">$ 0</span>
                </div>
              </div>
            </div>
            <div class="stat down">
              <div class="icon-circle"><i class="ri-arrow-down-line"></i></div>
              <div class="stat-info">
                <small>Expense</small>
                <div id="exp-container">
                  <span id="total-expense-idr">Rp 0</span>
                  <span id="total-expense-usd" class="sub-stat">$ 0</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="quick-actions">
        <button class="action-btn" data-preset="Transfer">
          <div class="icon-box blue"><i class="ri-exchange-dollar-line"></i></div>
          <span>Transfer</span>
        </button>
        <button class="action-btn" data-preset="Topup">
          <div class="icon-box green"><i class="ri-add-circle-line"></i></div>
          <span>Topup</span>
        </button>
        <button class="action-btn" data-preset="Bill">
          <div class="icon-box orange"><i class="ri-bill-line"></i></div>
          <span>Bill</span>
        </button>
        <button class="action-btn" id="more-actions">
          <div class="icon-box purple"><i class="ri-apps-2-line"></i></div>
          <span>More</span>
        </button>
      </div>

      <section class="chart-section">
        <div class="chart-header">
          <h3>Cashflow Trend</h3>
        </div>
        <div class="chart-wrapper">
          <canvas id="cashflowChart"></canvas>
        </div>
      </section>

      <section class="recent-transactions">
        <div class="section-header">
          <h3>Recent Transactions</h3>
          <a href="#" id="view-all-trx">View All</a>
        </div>
        <div class="transaction-list" id="transactionList">
          <!-- Populated by JS -->
          <div class="loading-state">Loading data...</div>
        </div>
      </section>

      <div class="safe-area-spacer"></div>
    </div>

    <!-- View: Stats -->
    <div id="stats-view" class="view-section">
      <header class="header-simple">
        <h2>Analytics</h2>
      </header>
      <div class="analytics-content" style="padding: 20px;">
        <div class="glass-card chart-card">
          <h4>Spending by Category</h4>
          <div style="height: 250px; position: relative; margin-top: 15px;">
            <canvas id="expenseChart"></canvas>
          </div>
        </div>
        <div id="statsList" class="stats-breakdown">
          <!-- JS -->
        </div>
      </div>
      <div class="safe-area-spacer"></div>
    </div>

    <!-- View: Wallet -->
    <div id="wallet-view" class="view-section">
      <header class="header-simple">
        <h2>My Wallets</h2>
        <button class="add-wallet-btn"><i class="ri-add-line"></i></button>
      </header>
      <div id="walletList" class="wallet-list-container">
        <!-- JS -->
      </div>
      <div class="safe-area-spacer"></div>
    </div>

    <!-- View: Profile -->
    <div id="profile-view" class="view-section">
      <header class="header-simple">
        <h2>Profile</h2>
      </header>
      <div class="profile-content" style="padding: 20px;">
        <div class="glass-card user-info-card">
          <img src="https://ui-avatars.com/api/?name=User&background=0D8ABC&color=fff&size=128" alt="Avatar">
          <h3>Personal Account</h3>
          <p>user@example.com</p>
        </div>
        <div class="menu-list">
          <button class="menu-item"><i class="ri-settings-4-line"></i> Settings <i
              class="ri-arrow-right-s-line"></i></button>
          <button class="menu-item"><i class="ri-shield-user-line"></i> Privacy <i
              class="ri-arrow-right-s-line"></i></button>
          <button class="menu-item"><i class="ri-question-line"></i> Support <i
              class="ri-arrow-right-s-line"></i></button>
          <button class="menu-item logout" onclick="alert('Logged out!')"><i class="ri-logout-box-r-line"></i>
            Logout</button>
        </div>
      </div>
      <div class="safe-area-spacer"></div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <div class="nav-item active" data-tab="home">
        <i class="ri-home-5-line"></i>
        <span>Home</span>
      </div>
      <div class="nav-item" data-tab="stats">
        <i class="ri-pie-chart-2-line"></i>
        <span>Stats</span>
      </div>
      <div class="nav-fab" id="open-add-modal">
        <i class="ri-add-line"></i>
      </div>
      <div class="nav-item" data-tab="wallet">
        <i class="ri-wallet-3-line"></i>
        <span>Wallet</span>
      </div>
      <div class="nav-item" data-tab="profile">
        <i class="ri-user-3-line"></i>
        <span>Profile</span>
      </div>
    </nav>

    <!-- Modal: Add Transaction -->
    <div class="modal-overlay" id="addTrxModal">
      <div class="bottom-sheet">
        <div class="sheet-header">
          <div class="handle"></div>
          <div class="header-content">
            <h3>New Transaction</h3>
            <button class="close-modal-btn"><i class="ri-close-line"></i></button>
          </div>
        </div>
        <div class="sheet-body">
          <form id="trxForm">
            <div class="form-group">
              <label>Amount (IDR)</label>
              <input type="number" id="trxAmount" placeholder="0" required autofocus>
            </div>
            <div class="form-group">
              <label>Description</label>
              <input type="text" id="trxTitle" placeholder="e.g. Lunch with friends" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Category</label>
                <select id="trxCategory">
                  <!-- JS -->
                </select>
              </div>
              <div class="form-group">
                <label>Wallet</label>
                <select id="trxWallet">
                  <!-- JS -->
                </select>
              </div>
            </div>
            <button type="submit" class="primary-btn">Save Transaction</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal: Edit Wallet -->
    <div class="modal-overlay" id="editWalletModal">
      <div class="center-dialog">
        <div class="glass-card dialog-box">
          <h3>Edit Wallet</h3>
          <form id="walletForm">
            <input type="hidden" id="editWalletId">
            <div class="form-group">
              <label>Wallet Name</label>
              <input type="text" id="editWalletName" required>
            </div>
            <div class="form-group">
              <label>Balance</label>
              <input type="number" id="editWalletBalance" required>
            </div>
            <div class="dialog-actions">
              <button type="button" class="secondary-btn cancel-wallet-btn">Cancel</button>
              <button type="submit" class="primary-btn">Save Changes</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- PWA Install Component -->
    <pwa-install id="ios-pwa-install" manual-apple="true"></pwa-install>

  </div>
  <script type="module" src="/main.js"></script>
</body>

</html>